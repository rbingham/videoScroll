angular.module("videoScroll").directive("playVideo",function(e){function n(e){if(null==e)return void t();if(w>d)return w=d,void i();if(0>w)return w=0,void i();if(null!=e){switch(e.type){case"wheel":e.deltaY>=0?w+=s:w-=s;break;case"keydown":switch(e.keyCode){case 37:case 38:w-=s;break;case 39:case 40:w+=s}}c.currentTime=w}}function o(e){if(e.getBoundingClientRect)return e.getBoundingClientRect().top;var n=0;if(e.offsetParent)do n+=e.offsetTop,e=e.offsetParent;while(e);return n}function t(){window.addEventListener&&window.addEventListener("DOMMouseScroll",l,!1),window.onwheel=l,window.onmousewheel=document.onmousewheel=l,window.ontouchmove=l,document.onkeydown=r}function i(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",l,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function l(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1,n(e)}function r(e){return v[e.keyCode]?(l(e),n(e),!1):void 0}function u(e){var n=e.getBoundingClientRect();return 0==n.top&&0==n.left&&0==n.bottom&&0==n.right?!1:n.top+m>=0&&n.left>=0&&n.bottom+m<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}var c,d,w,s,f,a,m,v={37:1,38:1,39:1,40:1};return w=0,s=.15,{restrict:"A",link:function(t,i,l){c=i[0],m=l.offset?Number(l.offset):0,scrollTop=o(c),console.log(scrollTop),f=scrollTop+m,a=scrollTop+m-40,console.log(f,a),angular.element(e).bind("scroll",function(){isNaN(d)&&(d=c.duration),u(c)&&e.scrollY>=a&&e.scrollY<=f&&n(null)})}}});
