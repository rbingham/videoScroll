angular.module("nanoKeys-web").directive("playVideo",function(e){function n(e){if(null==e)return void o();if(w>c)return w=c-.15,void i();if(0>w)return w=0,void i();if(null!=e){switch(e.type){case"wheel":e.deltaY>=0?w+=f:w-=f;break;case"keydown":switch(e.keyCode){case 37:case 38:w-=f;break;case 39:case 40:w+=f}}d.currentTime=w}}function t(e){if(e.getBoundingClientRect)return e.getBoundingClientRect().top;var n=0;if(e.offsetParent)do n+=e.offsetTop,e=e.offsetParent;while(e);return n}function o(){window.addEventListener&&window.addEventListener("DOMMouseScroll",u,!1),window.onwheel=u,window.onmousewheel=document.onmousewheel=u,window.ontouchmove=u,document.onkeydown=r}function i(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",u,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function u(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1,n(e)}function r(e){return v[e.keyCode]?(u(e),n(e),!1):void 0}function l(e){var n=e.getBoundingClientRect();return 0==n.top&&0==n.left&&0==n.bottom&&0==n.right?!1:n.top+m>=0&&n.left>=0&&n.bottom+m<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}var d,c,w,f,s,a,m,v={37:1,38:1,39:1,40:1};return w=0,{restrict:"A",link:function(o,i,u){d=i[0],m=u.offset?-1*Number(u.offset):0,f=u.time?Number(u.time):.15;var r=t(d);s=r+m,a=r+m-60,angular.element(e).bind("scroll",function(){isNaN(c)&&(c=d.duration),l(d)&&e.scrollY>=a&&e.scrollY<=s&&n(null)})}}});