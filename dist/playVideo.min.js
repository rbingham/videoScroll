angular.module("videoScroll").directive("playVideo",function(e){function n(e){if(null==e)return void t();if(w>c)return w=c-.15,void i();if(0>w)return w=0,void i();if(null!=e){switch(e.type){case"wheel":e.deltaY>=0?w+=f:w-=f;break;case"keydown":switch(e.keyCode){case 37:case 38:w-=f;break;case 39:case 40:w+=f}}d.currentTime=w}}function o(e){if(e.getBoundingClientRect)return e.getBoundingClientRect().top;var n=0;if(e.offsetParent)do n+=e.offsetTop,e=e.offsetParent;while(e);return n}function t(){window.addEventListener&&window.addEventListener("DOMMouseScroll",l,!1),window.onwheel=l,window.onmousewheel=document.onmousewheel=l,window.ontouchmove=l,document.onkeydown=r}function i(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",l,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function l(e){e=e||window.event,v&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),n(e)}function r(e){return h[e.keyCode]?(l(e),v):void 0}function u(e){var n=e.getBoundingClientRect();return 0==n.top&&0==n.left&&0==n.bottom&&0==n.right?!1:n.top+m>=0&&n.left>=0&&n.bottom+m<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}var d,c,w,f,s,a,m,v,h={37:1,38:1,39:1,40:1};return v=!0,w=0,{restrict:"A",link:function(t,i,l){d=i[0],m=l.offset?-1*Number(l.offset):0,f=l.time?Number(l.time):.15,v=!(l.preventScroll&&"false"===l.preventScroll);var r=o(d);s=r+m,a=r+m-60,angular.element(e).bind("scroll",function(){isNaN(c)&&(c=d.duration),u(d)&&e.scrollY>=a&&e.scrollY<=s&&n(null)})}}});